{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, ViewChild } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterLink } from '@angular/router';\nimport { ConfirmModalComponent } from 'src/app/Shared/Dialog/confirm-dialog';\nlet CategoryListComponent = class CategoryListComponent {\n  categoryService;\n  toastr;\n  categories = [];\n  selectedCategory = null;\n  loading = true;\n  error = null;\n  confirmModal;\n  constructor(categoryService, toastr) {\n    this.categoryService = categoryService;\n    this.toastr = toastr;\n  }\n  ngOnInit() {\n    this.load();\n  }\n  load() {\n    this.loading = true;\n    this.error = null;\n    this.categoryService.getAll().subscribe({\n      next: data => {\n        this.categories = data;\n        this.loading = false;\n      },\n      error: err => {\n        this.error = err?.message ?? 'Failed to load';\n        this.loading = false;\n      }\n    });\n  }\n  openDeleteModal(category) {\n    this.selectedCategory = category;\n    this.confirmModal.onConfirm = () => this.confirmDelete();\n    this.confirmModal.open();\n  }\n  confirmDelete() {\n    if (!this.selectedCategory) return;\n    this.categoryService.delete(this.selectedCategory.id).subscribe({\n      next: () => {\n        this.toastr.success(`Category \"${this.selectedCategory?.name}\" deleted successfully`);\n        this.load();\n      },\n      error: err => this.toastr.error(err?.message ?? 'Delete failed')\n    });\n  }\n  trackById(index, item) {\n    return item.id;\n  }\n};\n__decorate([ViewChild('confirmModal')], CategoryListComponent.prototype, \"confirmModal\", void 0);\nCategoryListComponent = __decorate([Component({\n  selector: 'app-category-list',\n  standalone: true,\n  imports: [CommonModule, RouterLink, ConfirmModalComponent],\n  templateUrl: './category-list.component.html',\n  styleUrls: ['./category-list.component.scss']\n})], CategoryListComponent);\nexport { CategoryListComponent };","map":{"version":3,"names":["Component","ViewChild","CommonModule","RouterLink","ConfirmModalComponent","CategoryListComponent","categoryService","toastr","categories","selectedCategory","loading","error","confirmModal","constructor","ngOnInit","load","getAll","subscribe","next","data","err","message","openDeleteModal","category","onConfirm","confirmDelete","open","delete","id","success","name","trackById","index","item","__decorate","selector","standalone","imports","templateUrl","styleUrls"],"sources":["D:\\Luftborn\\MiniCommerce-FrontEnd-Luftborn\\src\\app\\features\\categories\\category-list\\category-list.component.ts"],"sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterLink } from '@angular/router';\nimport { CategoryService } from '../../../core/services/category.service';\nimport { ToastrService } from 'ngx-toastr';\nimport type { Category } from '../../../models/category.model';\nimport { ConfirmModalComponent } from 'src/app/Shared/Dialog/confirm-dialog';\n\n@Component({\n  selector: 'app-category-list',\n  standalone: true,\n  imports: [CommonModule, RouterLink, ConfirmModalComponent],\n  templateUrl: './category-list.component.html',\n  styleUrls: ['./category-list.component.scss'],\n})\nexport class CategoryListComponent implements OnInit {\n  categories: Category[] = [];\n  selectedCategory: Category | null = null;\n  loading = true;\n  error: string | null = null;\n\n  @ViewChild('confirmModal') confirmModal!: ConfirmModalComponent;\n\n  constructor(\n    private categoryService: CategoryService,\n    private toastr: ToastrService\n  ) {}\n\n  ngOnInit(): void {\n    this.load();\n  }\n\n  load(): void {\n    this.loading = true;\n    this.error = null;\n    this.categoryService.getAll().subscribe({\n      next: (data) => {\n        this.categories = data;\n        this.loading = false;\n      },\n      error: (err) => {\n        this.error = err?.message ?? 'Failed to load';\n        this.loading = false;\n      },\n    });\n  }\n\n  openDeleteModal(category: Category) {\n    this.selectedCategory = category;\n    this.confirmModal.onConfirm = () => this.confirmDelete();\n    this.confirmModal.open();\n  }\n\n  confirmDelete() {\n    if (!this.selectedCategory) return;\n    this.categoryService.delete(this.selectedCategory.id).subscribe({\n      next: () => {\n        this.toastr.success(\n          `Category \"${this.selectedCategory?.name}\" deleted successfully`\n        );\n        this.load();\n      },\n      error: (err) =>\n        this.toastr.error(err?.message ?? 'Delete failed'),\n    });\n  }\n\n  trackById(index: number, item: Category) {\n    return item.id;\n  }\n}\n"],"mappings":";AAAA,SAASA,SAAS,EAAUC,SAAS,QAAQ,eAAe;AAC5D,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,UAAU,QAAQ,iBAAiB;AAI5C,SAASC,qBAAqB,QAAQ,sCAAsC;AASrE,IAAMC,qBAAqB,GAA3B,MAAMA,qBAAqB;EAStBC,eAAA;EACAC,MAAA;EATVC,UAAU,GAAe,EAAE;EAC3BC,gBAAgB,GAAoB,IAAI;EACxCC,OAAO,GAAG,IAAI;EACdC,KAAK,GAAkB,IAAI;EAEAC,YAAY;EAEvCC,YACUP,eAAgC,EAChCC,MAAqB;IADrB,KAAAD,eAAe,GAAfA,eAAe;IACf,KAAAC,MAAM,GAANA,MAAM;EACb;EAEHO,QAAQA,CAAA;IACN,IAAI,CAACC,IAAI,EAAE;EACb;EAEAA,IAAIA,CAAA;IACF,IAAI,CAACL,OAAO,GAAG,IAAI;IACnB,IAAI,CAACC,KAAK,GAAG,IAAI;IACjB,IAAI,CAACL,eAAe,CAACU,MAAM,EAAE,CAACC,SAAS,CAAC;MACtCC,IAAI,EAAGC,IAAI,IAAI;QACb,IAAI,CAACX,UAAU,GAAGW,IAAI;QACtB,IAAI,CAACT,OAAO,GAAG,KAAK;MACtB,CAAC;MACDC,KAAK,EAAGS,GAAG,IAAI;QACb,IAAI,CAACT,KAAK,GAAGS,GAAG,EAAEC,OAAO,IAAI,gBAAgB;QAC7C,IAAI,CAACX,OAAO,GAAG,KAAK;MACtB;KACD,CAAC;EACJ;EAEAY,eAAeA,CAACC,QAAkB;IAChC,IAAI,CAACd,gBAAgB,GAAGc,QAAQ;IAChC,IAAI,CAACX,YAAY,CAACY,SAAS,GAAG,MAAM,IAAI,CAACC,aAAa,EAAE;IACxD,IAAI,CAACb,YAAY,CAACc,IAAI,EAAE;EAC1B;EAEAD,aAAaA,CAAA;IACX,IAAI,CAAC,IAAI,CAAChB,gBAAgB,EAAE;IAC5B,IAAI,CAACH,eAAe,CAACqB,MAAM,CAAC,IAAI,CAAClB,gBAAgB,CAACmB,EAAE,CAAC,CAACX,SAAS,CAAC;MAC9DC,IAAI,EAAEA,CAAA,KAAK;QACT,IAAI,CAACX,MAAM,CAACsB,OAAO,CACjB,aAAa,IAAI,CAACpB,gBAAgB,EAAEqB,IAAI,wBAAwB,CACjE;QACD,IAAI,CAACf,IAAI,EAAE;MACb,CAAC;MACDJ,KAAK,EAAGS,GAAG,IACT,IAAI,CAACb,MAAM,CAACI,KAAK,CAACS,GAAG,EAAEC,OAAO,IAAI,eAAe;KACpD,CAAC;EACJ;EAEAU,SAASA,CAACC,KAAa,EAAEC,IAAc;IACrC,OAAOA,IAAI,CAACL,EAAE;EAChB;CACD;AAjD4BM,UAAA,EAA1BjC,SAAS,CAAC,cAAc,CAAC,C,0DAAsC;AANrDI,qBAAqB,GAAA6B,UAAA,EAPjClC,SAAS,CAAC;EACTmC,QAAQ,EAAE,mBAAmB;EAC7BC,UAAU,EAAE,IAAI;EAChBC,OAAO,EAAE,CAACnC,YAAY,EAAEC,UAAU,EAAEC,qBAAqB,CAAC;EAC1DkC,WAAW,EAAE,gCAAgC;EAC7CC,SAAS,EAAE,CAAC,gCAAgC;CAC7C,CAAC,C,EACWlC,qBAAqB,CAuDjC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}