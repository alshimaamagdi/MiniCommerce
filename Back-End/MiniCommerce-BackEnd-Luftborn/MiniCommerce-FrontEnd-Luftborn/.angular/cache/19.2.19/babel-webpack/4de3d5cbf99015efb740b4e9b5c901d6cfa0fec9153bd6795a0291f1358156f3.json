{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule, Validators } from '@angular/forms';\nimport { RouterLink } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../../core/services/category.service\";\nimport * as i3 from \"@angular/router\";\nfunction CategoryFormComponent_Conditional_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 2);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.error);\n  }\n}\nfunction CategoryFormComponent_Conditional_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 7);\n    i0.ɵɵtext(1, \"Name is required.\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class CategoryFormComponent {\n  fb;\n  categoryService;\n  router;\n  route;\n  form;\n  id = null;\n  loading = false;\n  error = null;\n  constructor(fb, categoryService, router, route) {\n    this.fb = fb;\n    this.categoryService = categoryService;\n    this.router = router;\n    this.route = route;\n  }\n  ngOnInit() {\n    this.id = this.route.snapshot.paramMap.get('id');\n    this.form = this.fb.group({\n      name: ['', [Validators.required, Validators.maxLength(200)]],\n      description: ['']\n    });\n    if (this.id) {\n      this.categoryService.getById(this.id).subscribe({\n        next: c => this.form.patchValue({\n          name: c.name,\n          description: c.description ?? ''\n        }),\n        error: () => this.error = 'Category not found'\n      });\n    }\n  }\n  get isEdit() {\n    return this.id != null;\n  }\n  submit() {\n    if (this.form.invalid || this.loading) return;\n    this.loading = true;\n    this.error = null;\n    const dto = {\n      name: this.form.value.name,\n      description: this.form.value.description || null\n    };\n    const req = this.id ? this.categoryService.update(this.id, dto) : this.categoryService.create(dto);\n    req.subscribe({\n      next: () => this.router.navigate(['/categories']),\n      error: err => {\n        this.error = err?.error?.message ?? err?.message ?? 'Save failed';\n        this.loading = false;\n      }\n    });\n  }\n  static ɵfac = function CategoryFormComponent_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || CategoryFormComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.CategoryService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n  };\n  static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CategoryFormComponent,\n    selectors: [[\"app-category-form\"]],\n    decls: 19,\n    vars: 6,\n    consts: [[1, \"container\"], [\"routerLink\", \"/categories\", 1, \"btn\", \"btn-secondary\"], [1, \"error\"], [3, \"ngSubmit\", \"formGroup\"], [1, \"form-group\"], [\"for\", \"name\"], [\"id\", \"name\", \"type\", \"text\", \"formControlName\", \"name\"], [1, \"field-error\"], [\"for\", \"description\"], [\"id\", \"description\", \"formControlName\", \"description\", \"rows\", \"3\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"]],\n    template: function CategoryFormComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n        i0.ɵɵtext(2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"p\")(4, \"a\", 1);\n        i0.ɵɵtext(5, \"Back to list\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(6, CategoryFormComponent_Conditional_6_Template, 2, 1, \"p\", 2);\n        i0.ɵɵelementStart(7, \"form\", 3);\n        i0.ɵɵlistener(\"ngSubmit\", function CategoryFormComponent_Template_form_ngSubmit_7_listener() {\n          return ctx.submit();\n        });\n        i0.ɵɵelementStart(8, \"div\", 4)(9, \"label\", 5);\n        i0.ɵɵtext(10, \"Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(11, \"input\", 6);\n        i0.ɵɵtemplate(12, CategoryFormComponent_Conditional_12_Template, 2, 0, \"span\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\", 4)(14, \"label\", 8);\n        i0.ɵɵtext(15, \"Description\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(16, \"textarea\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"button\", 10);\n        i0.ɵɵtext(18);\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        let tmp_3_0;\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.isEdit ? \"Edit Category\" : \"New Category\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵconditional(ctx.error ? 6 : -1);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"formGroup\", ctx.form);\n        i0.ɵɵadvance(5);\n        i0.ɵɵconditional(((tmp_3_0 = ctx.form.get(\"name\")) == null ? null : tmp_3_0.invalid) && ((tmp_3_0 = ctx.form.get(\"name\")) == null ? null : tmp_3_0.touched) ? 12 : -1);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"disabled\", ctx.form.invalid || ctx.loading);\n        i0.ɵɵadvance();\n        i0.ɵɵtextInterpolate1(\" \", ctx.loading ? \"Saving...\" : ctx.isEdit ? \"Update\" : \"Create\", \" \");\n      }\n    },\n    dependencies: [CommonModule, ReactiveFormsModule, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, RouterLink],\n    styles: [\".error[_ngcontent-%COMP%], .field-error[_ngcontent-%COMP%] {\\n  color: #d32f2f;\\n  margin-bottom: 0.5rem;\\n}\\n\\nform[_ngcontent-%COMP%] {\\n  max-width: 500px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmVhdHVyZXMvY2F0ZWdvcmllcy9jYXRlZ29yeS1mb3JtL2NhdGVnb3J5LWZvcm0uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxjQUFBO0VBQ0EscUJBQUE7QUFDRjs7QUFDQTtFQUNFLGdCQUFBO0FBRUYiLCJzb3VyY2VzQ29udGVudCI6WyIuZXJyb3IsIC5maWVsZC1lcnJvciB7XHJcbiAgY29sb3I6ICNkMzJmMmY7XHJcbiAgbWFyZ2luLWJvdHRvbTogMC41cmVtO1xyXG59XHJcbmZvcm0ge1xyXG4gIG1heC13aWR0aDogNTAwcHg7XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["CommonModule","ReactiveFormsModule","Validators","RouterLink","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","ctx_r0","error","CategoryFormComponent","fb","categoryService","router","route","form","id","loading","constructor","ngOnInit","snapshot","paramMap","get","group","name","required","maxLength","description","getById","subscribe","next","c","patchValue","isEdit","submit","invalid","dto","value","req","update","create","navigate","err","message","ɵɵdirectiveInject","i1","FormBuilder","i2","CategoryService","i3","Router","ActivatedRoute","selectors","decls","vars","consts","template","CategoryFormComponent_Template","rf","ctx","ɵɵtemplate","CategoryFormComponent_Conditional_6_Template","ɵɵlistener","CategoryFormComponent_Template_form_ngSubmit_7_listener","ɵɵelement","CategoryFormComponent_Conditional_12_Template","ɵɵconditional","ɵɵproperty","tmp_3_0","touched","ɵɵtextInterpolate1","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","FormGroupDirective","FormControlName","styles"],"sources":["D:\\Luftborn\\MiniCommerce-FrontEnd-Luftborn\\src\\app\\features\\categories\\category-form\\category-form.component.ts","D:\\Luftborn\\MiniCommerce-FrontEnd-Luftborn\\src\\app\\features\\categories\\category-form\\category-form.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormBuilder, FormGroup, ReactiveFormsModule, Validators } from '@angular/forms';\r\nimport { Router, RouterLink, ActivatedRoute } from '@angular/router';\r\nimport { CategoryService } from '../../../core/services/category.service';\r\nimport type { CreateCategoryDto } from '../../../models/category.model';\r\n\r\n@Component({\r\n  selector: 'app-category-form',\r\n  standalone: true,\r\n  imports: [CommonModule, ReactiveFormsModule, RouterLink],\r\n  templateUrl: './category-form.component.html',\r\n  styleUrl: './category-form.component.scss',\r\n})\r\nexport class CategoryFormComponent implements OnInit {\r\n  form!: FormGroup;\r\n  id: string | null = null;\r\n  loading = false;\r\n  error: string | null = null;\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private categoryService: CategoryService,\r\n    private router: Router,\r\n    private route: ActivatedRoute\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.id = this.route.snapshot.paramMap.get('id');\r\n    this.form = this.fb.group({\r\n      name: ['', [Validators.required, Validators.maxLength(200)]],\r\n      description: [''],\r\n    });\r\n    if (this.id) {\r\n      this.categoryService.getById(this.id).subscribe({\r\n        next: (c) => this.form.patchValue({ name: c.name, description: c.description ?? '' }),\r\n        error: () => (this.error = 'Category not found'),\r\n      });\r\n    }\r\n  }\r\n\r\n  get isEdit(): boolean {\r\n    return this.id != null;\r\n  }\r\n\r\n  submit(): void {\r\n    if (this.form.invalid || this.loading) return;\r\n    this.loading = true;\r\n    this.error = null;\r\n    const dto: CreateCategoryDto = {\r\n      name: this.form.value.name,\r\n      description: this.form.value.description || null,\r\n    };\r\n    const req = this.id\r\n      ? this.categoryService.update(this.id, dto)\r\n      : this.categoryService.create(dto);\r\n    req.subscribe({\r\n      next: () => this.router.navigate(['/categories']),\r\n      error: (err) => {\r\n        this.error = err?.error?.message ?? err?.message ?? 'Save failed';\r\n        this.loading = false;\r\n      },\r\n    });\r\n  }\r\n}\r\n","<div class=\"container\">\r\n  <h1>{{ isEdit ? 'Edit Category' : 'New Category' }}</h1>\r\n  <p><a routerLink=\"/categories\" class=\"btn btn-secondary\">Back to list</a></p>\r\n  @if (error) {\r\n    <p class=\"error\">{{ error }}</p>\r\n  }\r\n  <form [formGroup]=\"form\" (ngSubmit)=\"submit()\">\r\n    <div class=\"form-group\">\r\n      <label for=\"name\">Name</label>\r\n      <input id=\"name\" type=\"text\" formControlName=\"name\" />\r\n      @if (form.get('name')?.invalid && form.get('name')?.touched) {\r\n        <span class=\"field-error\">Name is required.</span>\r\n      }\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"description\">Description</label>\r\n      <textarea id=\"description\" formControlName=\"description\" rows=\"3\"></textarea>\r\n    </div>\r\n    <button type=\"submit\" class=\"btn btn-primary\" [disabled]=\"form.invalid || loading\">\r\n      {{ loading ? 'Saving...' : (isEdit ? 'Update' : 'Create') }}\r\n    </button>\r\n  </form>\r\n</div>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}