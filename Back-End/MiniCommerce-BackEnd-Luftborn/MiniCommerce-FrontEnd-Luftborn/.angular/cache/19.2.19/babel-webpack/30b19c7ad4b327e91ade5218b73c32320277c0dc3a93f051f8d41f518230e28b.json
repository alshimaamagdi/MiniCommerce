{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, ViewChild } from '@angular/core';\nimport { ConfirmModalComponent } from '../../shared/components/confirm-modal/confirm-modal.component';\nlet CategoryListComponent = class CategoryListComponent {\n  categoryService;\n  toastr;\n  categories = [];\n  selectedCategory = null;\n  confirmModal;\n  constructor(categoryService, toastr) {\n    this.categoryService = categoryService;\n    this.toastr = toastr;\n  }\n  ngOnInit() {\n    this.load();\n  }\n  load() {\n    this.categoryService.getAll().subscribe({\n      next: data => this.categories = data,\n      error: err => this.toastr.error(err?.message ?? 'Failed to load')\n    });\n  }\n  openDeleteModal(category) {\n    this.selectedCategory = category;\n    this.confirmModal.onConfirm = () => this.confirmDelete();\n    this.confirmModal.open();\n  }\n  confirmDelete() {\n    if (!this.selectedCategory) return;\n    this.categoryService.delete(this.selectedCategory.id).subscribe({\n      next: () => {\n        this.toastr.success(`Category \"${this.selectedCategory?.name}\" deleted successfully`);\n        this.load();\n      },\n      error: err => this.toastr.error(err?.message ?? 'Delete failed')\n    });\n  }\n};\n__decorate([ViewChild('confirmModal')], CategoryListComponent.prototype, \"confirmModal\", void 0);\nCategoryListComponent = __decorate([Component({\n  selector: 'app-category-list',\n  standalone: true,\n  imports: [ConfirmModalComponent],\n  templateUrl: './category-list.component.html',\n  styleUrls: ['./category-list.component.scss']\n})], CategoryListComponent);\nexport { CategoryListComponent };","map":{"version":3,"names":["Component","ViewChild","ConfirmModalComponent","CategoryListComponent","categoryService","toastr","categories","selectedCategory","confirmModal","constructor","ngOnInit","load","getAll","subscribe","next","data","error","err","message","openDeleteModal","category","onConfirm","confirmDelete","open","delete","id","success","name","__decorate","selector","standalone","imports","templateUrl","styleUrls"],"sources":["D:\\Luftborn\\MiniCommerce-FrontEnd-Luftborn\\src\\app\\features\\categories\\category-list\\category-list.component.ts"],"sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\nimport { CategoryService } from '../../../core/services/category.service';\nimport { ToastrService } from 'ngx-toastr';\nimport type { Category } from '../../../models/category.model';\nimport { ConfirmModalComponent } from '../../shared/components/confirm-modal/confirm-modal.component';\n\n@Component({\n  selector: 'app-category-list',\n  standalone: true,\n  imports: [ConfirmModalComponent],\n  templateUrl: './category-list.component.html',\n  styleUrls: ['./category-list.component.scss'],\n})\nexport class CategoryListComponent implements OnInit {\n  categories: Category[] = [];\n  selectedCategory: Category | null = null;\n\n  @ViewChild('confirmModal') confirmModal!: ConfirmModalComponent;\n\n  constructor(\n    private categoryService: CategoryService,\n    private toastr: ToastrService\n  ) {}\n\n  ngOnInit(): void {\n    this.load();\n  }\n\n  load(): void {\n    this.categoryService.getAll().subscribe({\n      next: (data) => (this.categories = data),\n      error: (err) => this.toastr.error(err?.message ?? 'Failed to load'),\n    });\n  }\n\n  openDeleteModal(category: Category) {\n    this.selectedCategory = category;\n    this.confirmModal.onConfirm = () => this.confirmDelete();\n    this.confirmModal.open();\n  }\n\n  confirmDelete() {\n    if (!this.selectedCategory) return;\n    this.categoryService.delete(this.selectedCategory.id).subscribe({\n      next: () => {\n        this.toastr.success(\n          `Category \"${this.selectedCategory?.name}\" deleted successfully`\n        );\n        this.load();\n      },\n      error: (err) => this.toastr.error(err?.message ?? 'Delete failed'),\n    });\n  }\n}\n"],"mappings":";AAAA,SAASA,SAAS,EAAUC,SAAS,QAAQ,eAAe;AAI5D,SAASC,qBAAqB,QAAQ,+DAA+D;AAS9F,IAAMC,qBAAqB,GAA3B,MAAMA,qBAAqB;EAOtBC,eAAA;EACAC,MAAA;EAPVC,UAAU,GAAe,EAAE;EAC3BC,gBAAgB,GAAoB,IAAI;EAEbC,YAAY;EAEvCC,YACUL,eAAgC,EAChCC,MAAqB;IADrB,KAAAD,eAAe,GAAfA,eAAe;IACf,KAAAC,MAAM,GAANA,MAAM;EACb;EAEHK,QAAQA,CAAA;IACN,IAAI,CAACC,IAAI,EAAE;EACb;EAEAA,IAAIA,CAAA;IACF,IAAI,CAACP,eAAe,CAACQ,MAAM,EAAE,CAACC,SAAS,CAAC;MACtCC,IAAI,EAAGC,IAAI,IAAM,IAAI,CAACT,UAAU,GAAGS,IAAK;MACxCC,KAAK,EAAGC,GAAG,IAAK,IAAI,CAACZ,MAAM,CAACW,KAAK,CAACC,GAAG,EAAEC,OAAO,IAAI,gBAAgB;KACnE,CAAC;EACJ;EAEAC,eAAeA,CAACC,QAAkB;IAChC,IAAI,CAACb,gBAAgB,GAAGa,QAAQ;IAChC,IAAI,CAACZ,YAAY,CAACa,SAAS,GAAG,MAAM,IAAI,CAACC,aAAa,EAAE;IACxD,IAAI,CAACd,YAAY,CAACe,IAAI,EAAE;EAC1B;EAEAD,aAAaA,CAAA;IACX,IAAI,CAAC,IAAI,CAACf,gBAAgB,EAAE;IAC5B,IAAI,CAACH,eAAe,CAACoB,MAAM,CAAC,IAAI,CAACjB,gBAAgB,CAACkB,EAAE,CAAC,CAACZ,SAAS,CAAC;MAC9DC,IAAI,EAAEA,CAAA,KAAK;QACT,IAAI,CAACT,MAAM,CAACqB,OAAO,CACjB,aAAa,IAAI,CAACnB,gBAAgB,EAAEoB,IAAI,wBAAwB,CACjE;QACD,IAAI,CAAChB,IAAI,EAAE;MACb,CAAC;MACDK,KAAK,EAAGC,GAAG,IAAK,IAAI,CAACZ,MAAM,CAACW,KAAK,CAACC,GAAG,EAAEC,OAAO,IAAI,eAAe;KAClE,CAAC;EACJ;CACD;AApC4BU,UAAA,EAA1B3B,SAAS,CAAC,cAAc,CAAC,C,0DAAsC;AAJrDE,qBAAqB,GAAAyB,UAAA,EAPjC5B,SAAS,CAAC;EACT6B,QAAQ,EAAE,mBAAmB;EAC7BC,UAAU,EAAE,IAAI;EAChBC,OAAO,EAAE,CAAC7B,qBAAqB,CAAC;EAChC8B,WAAW,EAAE,gCAAgC;EAC7CC,SAAS,EAAE,CAAC,gCAAgC;CAC7C,CAAC,C,EACW9B,qBAAqB,CAwCjC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}